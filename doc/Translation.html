<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.0 Transitional//EN' 'http://www.w3.org/TR/REC-html40/loose.dtd'>
<!--NewPage-->
<HTML>
<HEAD>
	<!-- Generated by PhpDoc date: 'Tue, 14 Jan 2003 16:27:22 +0100' -->
	<TITLE>Docs For Class Translation</TITLE>
<LINK REL ='stylesheet' TYPE='text/css' HREF='stylesheet.css' TITLE='Style'>
</HEAD>
<BODY BGCOLOR='white'>

<!-- Start of Class Data -->
<H2>
	Class Translation
</H2>
<pre>
<pre>PEAR
   |
   --Translation</pre>
</pre>
<H3>
	Classes extended from Translation:
</H3>

<p>
	<b><i>Located in File: Program_Root/translation.class.0121.php</i></b><br>
</p>
<hr>
<!-- ========== Info from phpDoc block ========= -->
<b>Translation class</b>
<pre>
Class allows to store and retrieve all the strings on multilingual site in the 
database.
Class connects to any database using PHP PEAR extension - so it needs 
PEAR to be installed to work correctly.
The object should be created for every page. While creation all the strings 
connected with specific page and the strings connected with all the pages 
on the site are loaded into variable, so access to them is quite fast and 
does not overload database server connection.
Reducing the DB connections by possibility to use the existing ones - the 
constructor right now needs the PEAR DB DSN to make the connection do 
the DB. The new version will allow user to use the existing DB connection 
(PEAR DB connection) instead of making the new one. To do so he just needs 
to pass to the constructor the handle for this connection instead of DSN.
</pre>
<UL>
	
	<LI><b>Package</b> - <CODE>Translation</CODE></LI>
	
	<LI><b>Access</b> - <CODE>public</CODE></LI>
	
	<LI><b>Version</b> - <CODE>1.2.1</CODE></LI>
	
	<LI><b>Author</b> - <CODE>Wojciech Zieliñski &lt;<a href="mailto:voyteck@caffe.com.pl">voyteck@caffe.com.pl</a>&gt;</CODE></LI>
	
</UL>

<hr>
<!-- =========== VAR SUMMARY =========== -->
<A NAME='var_summary'><!-- --></A>
<TABLE BORDER='1' CELLPADDING='3' CELLSPACING='0' WIDTH='100%'>
	<TR BGCOLOR='#CCCCFF' CLASS='TableHeadingColor'>
		<TD>
			<FONT SIZE='+2'><B>Class Variable Summary</B></FONT>
		</TD>
	</TR>

	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#$ConnectionReused'>$ConnectionReused</A></B></CODE>
			<BR>
			<blockquote> Is true if the connection was reused, not made from the class </blockquote>
			<blockquote> Default Value: <CODE>-><-</CODE> </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#$db'>$db</A></B></CODE>
			<BR>
			<blockquote> Connection to database </blockquote>
			<blockquote> Default Value: <CODE>-><-</CODE> </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#$ErrorText'>$ErrorText</A></B></CODE>
			<BR>
			<blockquote> The string that will be displayed, if no string has been found in the DB for specified string_id </blockquote>
			<blockquote> Default Value: <CODE>-><-</CODE> </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#$LanguageID'>$LanguageID</A></B></CODE>
			<BR>
			<blockquote> Language identifier </blockquote>
			<blockquote> Default Value: <CODE>-><-</CODE> </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#$PageName'>$PageName</A></B></CODE>
			<BR>
			<blockquote> Page identifier </blockquote>
			<blockquote> Default Value: <CODE>-><-</CODE> </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#$Strings'>$Strings</A></B></CODE>
			<BR>
			<blockquote> Strings of the given page array </blockquote>
			<blockquote> Default Value: <CODE>->array()<-</CODE> </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#$TableDefinitions'>$TableDefinitions</A></B></CODE>
			<BR>
			<blockquote> The array with table and column names </blockquote>
			<blockquote> Default Value: <CODE>-><-</CODE> </blockquote>
		</TD>
	</TR>
	
</TABLE>

<hr>
<!-- =========== VAR SUMMARY =========== -->
<A NAME='var_summary'><!-- --></A>
<TABLE BORDER='1' CELLPADDING='3' CELLSPACING='0' WIDTH='100%'>
	<TR BGCOLOR='#CCCCFF' CLASS='TableHeadingColor'>
		<TD>
			<FONT SIZE='+2'><B>Inherited Class Variable Summary</B></FONT>
		</TD>
	</TR>

	
</TABLE>

<hr>
<!-- =========== INHERITED METHOD SUMMARY =========== -->
<A NAME='functions_inherited'><!-- --></A>
<TABLE BORDER='1' CELLPADDING='3' CELLSPACING='0' WIDTH='100%'>
	<TR BGCOLOR='#CCCCFF' CLASS='TableHeadingColor'>
		<TD>
			<FONT SIZE='+2'><B>Inherited Method Summary</B></FONT>
		</TD>
	</TR>

	
</TABLE>

<br>
<!-- should have constructor at some point -->
<!-- =========== Method SUMMARY =========== -->
<A NAME='Method_summary'><!-- --></A>
<TABLE BORDER='1' CELLPADDING='3' CELLSPACING='0' WIDTH='100%'>
	<TR BGCOLOR='#CCCCFF' CLASS='TableHeadingColor'>
		<TD>
			<FONT SIZE='+2'><B>Method Summary</B></FONT>
		</TD>
	</TR>

	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#constructor Translation'>void constructor Translation ( $PageName, $LanguageID, $pear_DSN, [$CustomTables = 0] )</A></B></CODE>
			<BR>
			<blockquote> Class constructor </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#getLangName'>string getLangName (  )</A></B></CODE>
			<BR>
			<blockquote> Active language name retrieval </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#getMetaTags'>string getMetaTags (  )</A></B></CODE>
			<BR>
			<blockquote> META tags retrieval </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#getOtherLangs'>array getOtherLangs (  )</A></B></CODE>
			<BR>
			<blockquote> Other languages retrieval </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#gstr'>string gstr ( $StringName, [$Params = array()] )</A></B></CODE>
			<BR>
			<blockquote> Translated string retrieval </blockquote>
		</TD>
	</TR>
	
	<!-- =========== Summary =========== -->
	<TR BGCOLOR='white' CLASS='TableRowColor'>
		<TD>
			<CODE><B><A HREF='Translation.html#_Translation'>void _Translation (  )</A></B></CODE>
			<BR>
			<blockquote> Class destructor </blockquote>
		</TD>
	</TR>
	
</TABLE>

<hbr>
<!-- ============ VARIABLE DETAIL =========== -->

<A NAME='variable_detail'></A>
<TABLE BORDER='1' CELLPADDING='3' CELLSPACING='0' WIDTH='100%'>
	<TR BGCOLOR='#CCCCFF' CLASS='TableHeadingColor'>
		<TD>
			<FONT SIZE='+2'><B>Variable Detail</B></FONT>
		</TD>
	</TR>
</TABLE>


<A NAME='$ConnectionReused'><!-- --></A><H3>$ConnectionReused</H3>
<b>Data type:</b> int<br>
<!-- ========== Info from phpDoc block ========= -->
<b>Is true if the connection was reused, not made from the class</b>
<pre>

</pre>
<UL>
	
	<LI><b>Var</b> - <CODE>$ConnectionReused</CODE></LI>
	
</UL>

<HR>

<A NAME='$db'><!-- --></A><H3>$db</H3>
<b>Data type:</b> DB<br>
<!-- ========== Info from phpDoc block ========= -->
<b>Connection to database</b>
<pre>

</pre>
<UL>
	
	<LI><b>Var</b> - <CODE>$db</CODE></LI>
	
</UL>

<HR>

<A NAME='$ErrorText'><!-- --></A><H3>$ErrorText</H3>
<b>Data type:</b> string<br>
<!-- ========== Info from phpDoc block ========= -->
<b>The string that will be displayed, if no string has been found in the DB for specified string_id</b>
<pre>

</pre>
<UL>
	
	<LI><b>Var</b> - <CODE>$ErrorText</CODE></LI>
	
</UL>

<HR>

<A NAME='$LanguageID'><!-- --></A><H3>$LanguageID</H3>
<b>Data type:</b> string<br>
<!-- ========== Info from phpDoc block ========= -->
<b>Language identifier</b>
<pre>

</pre>
<UL>
	
	<LI><b>Var</b> - <CODE>$LanguageID</CODE></LI>
	
</UL>

<HR>

<A NAME='$PageName'><!-- --></A><H3>$PageName</H3>
<b>Data type:</b> string<br>
<!-- ========== Info from phpDoc block ========= -->
<b>Page identifier</b>
<pre>

</pre>
<UL>
	
	<LI><b>Var</b> - <CODE>$PageName</CODE></LI>
	
</UL>

<HR>

<A NAME='$Strings'><!-- --></A><H3>$Strings</H3>
<b>Data type:</b> array<br>
<!-- ========== Info from phpDoc block ========= -->
<b>Strings of the given page array</b>
<pre>
This one is for fast access to cached strings for specified page
</pre>
<UL>
	
	<LI><b>Var</b> - <CODE>string $Strings</CODE></LI>
	
</UL>

<HR>

<A NAME='$TableDefinitions'><!-- --></A><H3>$TableDefinitions</H3>
<b>Data type:</b> array<br>
<!-- ========== Info from phpDoc block ========= -->
<b>The array with table and column names</b>
<pre>
The table may have following items:

'langsavail' - table, in which all the information of the possible languages 
is kept. This array item may be the string - then the structure of the table 
remains as original, but the name is specified here; or the array with the 
following items:
'name' - the name of the table - default is 'tr_langsavail'
'lang_id' - the column that stores the language identifier - default 
is 'lang_id'
'lang_name' - the column that stores the language name - default 
is 'name'
'metatags' - the column that stores meta tags for the pages in specified 
language - default is 'metatags'
'errortext' - the column that stores the text that will be displayed in case 
if some text will not be found in the DB - default is 'errortext'

'strings_XX' - table, in which the strings of language &quot;XX&quot; (the 
corresponding lang_id) are kept. This array item may be the string - then 
the structure of the table remains as original, but the name is specified 
here; or the array with the following items:
'name' - the name of the table - default is 'tr_strings_XX'
'page_id' - the page identifier - default is 'page_id'.
'string_id' - the string indetifier - default is 'string_id'.
'string' - the string itself - default is 'string'.

This parameter in fact has impact only if the DB is used as the strings 
repository. The defaults are set in the way that the method is compatible 
with lower versions.
</pre>
<UL>
	
	<LI><b>Var</b> - <CODE>$CustomTables</CODE></LI>
	
</UL>

<HR>


<hr>
<!-- ============ FUNCTION DETAIL =========== -->

<A NAME='function_detail'></A>
<TABLE BORDER='1' CELLPADDING='3' CELLSPACING='0' WIDTH='100%'>
	<TR BGCOLOR='#CCCCFF' CLASS='TableHeadingColor'>
		<TD>
			<FONT SIZE='+2'><B>Method Detail</B></FONT>
		</TD>
	</TR>
</TABLE>


<A NAME='constructor Translation'><!-- --></A><H3>constructor Translation</H3>
<P><B>void constructor Translation ( $PageName, $LanguageID, $pear_DSN, [$CustomTables = 0] )</B></P>
<P></P>
<!-- ========== Info from phpDoc block ========= -->
<b>Class constructor</b>
<pre>

</pre>
<DL>
	<DT>Function Parameters:</DT>
	
	<DD><CODE>- <i>string $PageName</i>: the page identifier. It identifies 
 strings connected with specific page on the site</CODE></DD>
	
	<DD><CODE>- <i>string $LanguageID</i>: language id. All the languages 
 are stored on the database on specific ID's.</CODE></DD>
	
	<DD><CODE>- <i>string $pear_DSN</i>: This might be 3 types: the PEAR DSN 
 string form making the connection; the PEAR DB connection handle; the string 
 in the format: 
 gettext://LOCALE:LANG:BINDTXTDOMAIN:TXTDOMAINFILE:TXTDOMAIN:CFGFILE 
 for using the native PHP gettext support.</CODE></DD>
	
	<DD><CODE>- <i>array $CustomTables</i>: This is the array of the names of the tables and 
 optionally the names of columns. It contains the following elements:</CODE></DD>
	

	<DT>Function Info:</DT>
	
	<DD><b>Since</b> - <CODE>version 1.2.1</CODE></DD>
	
</DL>

<HR>

<A NAME='getLangName'><!-- --></A><H3>getLangName</H3>
<P><B>string getLangName (  )</B></P>
<P></P>
<!-- ========== Info from phpDoc block ========= -->
<b>Active language name retrieval</b>
<pre>
Retrieves the name of active language
</pre>
<DL>
	<DT>Function Parameters:</DT>
	

	<DT>Function Info:</DT>
	
	<DD><b>Return</b> - <CODE>current active language name or PEAR_ERROR object in case of problems</CODE></DD>
	
</DL>

<HR>

<A NAME='getMetaTags'><!-- --></A><H3>getMetaTags</H3>
<P><B>string getMetaTags (  )</B></P>
<P></P>
<!-- ========== Info from phpDoc block ========= -->
<b>META tags retrieval</b>
<pre>
Retrievs the META tags that should be added on the top of translated page, so the translated characters will be correctly displayed on client's browser.
</pre>
<DL>
	<DT>Function Parameters:</DT>
	

	<DT>Function Info:</DT>
	
	<DD><b>Return</b> - <CODE>with configured in DB META tags for selected language. In case of DB error - returns PEAR_ERROR object.</CODE></DD>
	
</DL>

<HR>

<A NAME='getOtherLangs'><!-- --></A><H3>getOtherLangs</H3>
<P><B>array getOtherLangs (  )</B></P>
<P></P>
<!-- ========== Info from phpDoc block ========= -->
<b>Other languages retrieval</b>
<pre>
Retrieves names of all other languages, not the active.
</pre>
<DL>
	<DT>Function Parameters:</DT>
	

	<DT>Function Info:</DT>
	
	<DD><b>Return</b> - <CODE>2-dimensional array (0..)('id', 'name') for all the languages defined in DB but the current selected one. In case of DB error - returns PEAR_ERROR object.</CODE></DD>
	
</DL>

<HR>

<A NAME='gstr'><!-- --></A><H3>gstr</H3>
<P><B>string gstr ( $StringName, [$Params = array()] )</B></P>
<P></P>
<!-- ========== Info from phpDoc block ========= -->
<b>Translated string retrieval</b>
<pre>
Retrieves the string basing on string identifier (string_id) or by 
page_id.string_id. It means the strings_id may be specified in 2 ways:
- as normal string_id - then the string is retrieved from the cached version
of strings in the current page_id
- as [page_id].[string_id] - then teh strings is retrieved from the DB by getting
it from the given page_id. The additional optimization mechanism checks
if the page_id is not the same, as the current - if it is - the string will still be
retrieved from the cached version.
Also in the Params array there can be the item 'lang_id'. If not 'action' has 
been given then the string from specified lang_id (in specified language) 
will be retrieved. This solution is not recommended for common usage 
(e.g. for the whole pages) as this will not use the cached in the constructor 
strings, but will make another query to the DB for the specified query.
Another item that can be this array is 'action'. This specified special 
actions that should be performed. The special actions can be the following:
'normal' - this is default setting. It means that method will act as if this 
item was not given.
'translate' - this will couse, that the $StringName will not be the 
string_id, but the string itself. This must be set only together with 
'lang_id' item. Method will try to find the specified string in the foreign 
(specified in lang_id) language and will retrieve the corresponding string in 
the current language. This solution is not recommended for common usage 
(e.g. for the whole pages) as this will not use the cached in the constructor 
strings, but will make another query to the DB for the specified query.
Item 'optimization' is used to specify the optimization of the queries - 
if the main load should be performed by the PHP server (by doing more, but 
less complicated queries) or DB server (PHP is sending only one, but 
complicated query). This one is used only together with specified 'lang_id' 
and 'action'=&gt;'translate' - as this performs more operations, then other 
queries. It can have following values:
'php' - the default setting, cousing PHP to make 2 (or 3 if the string will 
be found in some other page_id then the current) uncomplicated queries. This 
is recommened if the DB server is the same machine as the PHP server.
'db' - this couses PHP to make only 1, but comlicated query. This is 
recommended if the DB server is separate machine, then PHP server. WARNING: 
This will not work with MySQL DB server and Db servers, that does not 
supports nested SELECTs (SELECT ... FROM ... WHERE sth = (SELECT...))
</pre>
<DL>
	<DT>Function Parameters:</DT>
	
	<DD><CODE>- <i>string $StringName</i>: string identifier - unique for the page as well as for the strings, that are available on all the pages.</CODE></DD>
	
	<DD><CODE>- <i>array $Params</i>: string 	string may be parametrized - and the paraters, that will be &quot;inserted&quot; into string may be typen into this array. It means, that &amp;&amp;1&amp;&amp; string will be replaced by 1st array element; string &amp;&amp;2&amp;&amp; will be replaced by 2nd array element; string &amp;&amp;3&amp;&amp; will be replaced by 3rd array element etc.</CODE></DD>
	

	<DT>Function Info:</DT>
	
	<DD><b>Return</b> - <CODE>retrieved string</CODE></DD>
	
</DL>

<HR>

<A NAME='_Translation'><!-- --></A><H3>_Translation</H3>
<P><B>void _Translation (  )</B></P>
<P></P>
<!-- ========== Info from phpDoc block ========= -->
<b>Class destructor</b>
<pre>

</pre>
<DL>
	<DT>Function Parameters:</DT>
	

	<DT>Function Info:</DT>
	
	<DD><b>Since</b> - <CODE>version 1.2.1</CODE></DD>
	
</DL>

<HR>


<hr>
</HTML>
